@import 'tailwindcss';

:root {
  --background: #ffffff;
  --foreground: #171717;
}
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  /* Figma tokens */
  /* Colors */
  --color-brand-0: #f0fafa;
  --color-brand-50: #e9fbf9;
  --color-brand-100: #d3f7f3;
  --color-brand-200: #a8efe7;
  --color-brand-300: #7de7dc;
  --color-brand-400: #59ded2;
  --color-brand-500: #51d6c7;
  --color-brand-600: #3fb7ab;
  --color-brand-700: #338f88;
  --color-brand-800: #2a6b67;
  --color-brand-900: #1e4947;

  --color-neutral-0: #ffffff;
  --color-neutral-50: #f8fafb;
  --color-neutral-100: #eef2f4;
  --color-neutral-200: #e2e7ea;
  --color-neutral-300: #cbd3d9;
  --color-neutral-400: #aeb8c2;
  --color-neutral-500: #8a95a1;
  --color-neutral-600: #6d7783;
  --color-neutral-700: #535c66;
  --color-neutral-800: #3d434a;
  --color-neutral-900: #24282c;

  --color-success-50: #e9f8f1;
  --color-success-200: #a0e3c3;
  --color-success-600: #2e7d5b;
  --color-success-800: #1d4f3a;

  --color-warning-50: #fff7e8;
  --color-warning-200: #ffd188;
  --color-warning-600: #d97706; /* amber-600 */
  --color-warning-800: #92400e; /* amber-800 */

  --color-error-50: #feebec;
  --color-error-200: #f7b7ba;
  --color-error-600: #b91c1c; /* red-700 */
  --color-error-800: #7f1d1d; /* red-900 */

  --color-info-50: #f3eaff;
  --color-info-200: #d4b5ff;
  --color-info-600: #7825eb;
  --color-info-800: #5a1eaf;

  /* Semantic tokens (derived from scale above) */
  --color-page-bg: var(--color-neutral-50);
  --color-surface: var(--color-neutral-0);
  --color-surface-accent: var(--color-brand-50);
  --color-text-primary: var(--color-neutral-900);
  --color-text-secondary: var(--color-neutral-600);
  --color-text-muted: var(--color-neutral-400);
  --color-text-inverse: var(--color-neutral-0);
  --color-link: var(--color-brand-500);
  --color-border: var(--color-neutral-300);
  --color-brand: var(--color-brand-500);
  --color-brand-strong: var(--color-brand-800);
  --color-brand-weak: var(--color-brand-200);

  /* States */
  --color-success: var(--color-brand-500);
  --color-warning: var(--color-warning-200);
  --color-info: var(--color-info-200);
  --color-danger: #ef4444;
  --color-focus: rgba(81, 214, 199, 0.4);
  --overlay-scrim: rgba(36, 40, 44, 0.5);

  /* Data viz */
  --chart-1: var(--color-brand-800);
  --chart-2: var(--color-brand-500);
  --chart-3: var(--color-brand-100);
  --chart-4: var(--color-brand-200);
  --chart-accent: var(--color-info-200);
  --chart-grid: var(--color-neutral-300);
  --chart-axis: var(--color-neutral-400);
  --chart-negative: var(--color-danger);
  --chart-threshold: var(--color-neutral-600);
  --chart-area-fill: rgba(81, 214, 199, 0.16);

  /* Semantic surfaces */
  --color-surface-app: var(--color-neutral-50); /* App/page background */
  --color-surface-modal: var(
    --color-neutral-0
  ); /* Dedicated modal surface (white) */
  --color-surface-popover: var(--color-neutral-50); /* Popovers/cards */

  /* Spacing - NOW SCALES WITH FLUID BASE */
  --spacing-topbar: 4rem; /* 64px ÷ 16 = 4rem */
  --spacing-sidebar: 16rem; /* 256px ÷ 16 = 16rem */
  --spacing-sidebar-collapsed: 5rem; /* 80px ÷ 16 = 5rem */
  --spacing-nav-item: 3rem; /* 48px ÷ 16 = 3rem */
  --spacing-cta: 3.5rem; /* 56px ÷ 16 = 3.5rem */
  --spacing-gapsm: 0.5rem; /* 8px ÷ 16 = 0.5rem */
  --spacing-gapmd: 1rem; /* 16px ÷ 16 = 1rem */
  --spacing-plnav: 1.5rem; /* 24px ÷ 16 = 1.5rem */

  /* Dashboard specific spacing tokens (from Figma measurements) */
  --space-card-pad: 1rem; /* 16px */
  --space-card-gap: 1rem; /* 16px */
  --space-card-gap2: 0.6875rem; /* 11px */
  --space-card-inner: 0.5rem; /* 8px */
  --space-header-cards: 2.4375rem; /* 39px header -> cards gap */
  --space-card-row: 0.5rem; /* 8px between rows inside card */
  --space-card-metric: 0.25rem; /* 4px between value and KPI */

  /* Dashboard-specific spacing - usando clamp() con vh para escalar verticalmente */
  --spacing-card-gap: clamp(
    1rem,
    calc(var(--width-card-chart-lg-fluid) - (2 * var(--width-card-stat-fluid))),
    1.4375rem
  ); /* gap iguala el ancho del chart y respeta límites de Figma */
  --spacing-section-gap: clamp(
    1rem,
    2.5vh,
    2rem
  ); /* 16px → 32px - separación entre secciones */
  --spacing-card-padding: 1rem; /* 16px - padding interno de cards */
  --spacing-chart-margin: 1rem; /* 16px - márgenes de gráficos */
  --spacing-header-stack: clamp(
    1.6rem,
    4vh,
    2.8rem
  ); /* Espaciado reducido 20%: antes 2rem-3.5rem → ahora 1.6rem-2.8rem */
  --spacing-stats-offset: clamp(
    1rem,
    2vh,
    1.5rem
  ); /* 16px → 24px - offset interno */
  --spacing-charts-offset: 18.25rem; /* Distancia desde la parte superior a la fila de gráficos */

  /* Navigator controls */
  --nav-chip-height: clamp(2.25rem, 4vw, 2.5rem); /* 36px → 40px */
  --nav-chip-pad-x: clamp(0.75rem, 2.5vw, 1rem); /* 12px → 16px */
  --nav-chip-width-side: clamp(2.75rem, 10vw, 3.5rem); /* 44px → 56px */
  --nav-chip-width-center: clamp(8.5rem, 40vw, 10.0625rem); /* 136px → 161px */

  /* Typography - NOW SCALES WITH FLUID BASE */
  --font-inter: var(--font-geist-sans);
  --text-title-md: 1.125rem; /* 18px ÷ 16 = 1.125rem */
  --leading-title-md: 1.75rem; /* 28px ÷ 16 = 1.75rem */
  --text-body-md: 1rem; /* 16px ÷ 16 = 1rem */
  --leading-body-md: 1.5rem; /* 24px ÷ 16 = 1.5rem */
  /* Extended from Figma */
  --text-title-lg: 1.5rem; /* 24px */
  --leading-title-lg: 2rem; /* 32px */
  --text-title-sm: 1rem; /* 16px (Medium) */
  --leading-title-sm: 1.5rem; /* 24px */
  --text-label-md: 0.75rem; /* 12px */
  --leading-label-md: 1rem; /* 16px */
  --text-body-sm: 0.875rem; /* 14px */
  --leading-body-sm: 1.25rem; /* 20px */
  --text-label-sm: 0.6875rem; /* 11px */
  --leading-label-sm: 1rem; /* 16px */

  /* KPI / Display numbers */
  --text-kpi: min(3.25rem, 5vw);
  --leading-kpi: 1.2;

  /* Display Typography (Dashboard KPIs grandes) */
  --text-display-lg: 3.25rem; /* 52px - Producción total */
  --leading-display-lg: 3.75rem; /* 60px */
  --text-display-md: 2.25rem; /* 36px - KPIs principales */
  --leading-display-md: 2.75rem; /* 44px */

  /* Headline Typography (Números destacados) */
  --text-headline-lg: 2.25rem; /* 36px - "42.000", "€ 56 K" */
  --leading-headline-lg: 2.75rem; /* 44px */
  --text-headline-sm: 1.75rem; /* 28px - "1.200 €", "2.200 €" */
  --leading-headline-sm: 2.25rem; /* 36px */

  /* Body Large (Porcentajes de cambio) */
  --text-body-lg: 1.125rem; /* 18px - "+ 35%" */
  --leading-body-lg: 1.75rem; /* 28px */

  /* Dashboard Component Dimensions */
  --height-card-stat: 10.1875rem; /* 163px - cards de estadísticas */
  --height-card-chart: 24.58125rem; /* 393.3px (+15% sobre 342px) - cards con gráficos */
  --width-card-stat: 32.6875rem; /* 523px - ancho card estadística */
  --width-card-chart-lg: 66.8125rem; /* 1069px - ancho card grande */
  --width-card-chart-md: 33.0625rem; /* 529px - ancho card mediano */
  --width-income-card: 9.2625rem; /* 148.2px - tarjeta Tipos de ingreso (−5%) */
  --height-income-card: 5.3125rem; /* 85px - tarjeta Tipos de ingreso (−15%) */

  /* Profesional bars chart ratios (Figma exact values) */
  --chart-prof-width-limit: 95vw;
  --chart-prof-height-limit: 39.1vh; /* +15% sobre 34vh para mayor altura */
  --chart-prof-axis-left-ratio: 0.10302; /* 55 / 529 */
  --chart-prof-axis-label-left-ratio: 0.03025; /* 16 / 529 */
  --chart-prof-grid-width-ratio: 0.82892; /* 438 / 529 */
  --chart-prof-axis-height-ratio: 0.64327; /* 220 / 342 */
  --chart-prof-grid-height-ratio: 0.60819; /* 208 / 342 */
  --chart-prof-grid-top-ratio: 0.24561; /* 84 / 342 */
  --chart-prof-labels-bottom-ratio: 0.88304; /* 302 / 342 */
  --chart-prof-bar-width-ratio: 0.10964; /* 58 / 529 */
  --chart-prof-bar-1-left-ratio: 0.10302; /* 55 / 529 */
  --chart-prof-bar-2-left-ratio: 0.31570; /* 167 / 529 */
  --chart-prof-bar-3-left-ratio: 0.55955; /* 296 / 529 */
  --chart-prof-bar-4-left-ratio: 0.81285; /* 430 / 529 */
  --chart-prof-bar-1-top-ratio: 0.28363; /* 97 / 342 */
  --chart-prof-bar-2-top-ratio: 0.38070; /* 130 / 342 */
  --chart-prof-bar-3-top-ratio: 0.51170; /* 175 / 342 */
  --chart-prof-bar-4-top-ratio: 0.46491; /* 159 / 342 */
  --chart-prof-bar-1-height-ratio: 0.57018; /* 195 / 342 */
  --chart-prof-bar-2-height-ratio: 0.47310; /* 162 / 342 */
  --chart-prof-bar-3-height-ratio: 0.34211; /* 117 / 342 */
  --chart-prof-bar-4-height-ratio: 0.38889; /* 133 / 342 */

  /* Accounting panel layout (Figma exact values) */
  --accounting-width-limit: 95vw;
  --accounting-height-limit: 39.1vh; /* +15% sobre 34vh alineado con charts */

  /* Fluid heights - adapt to viewport usando vh para escalar verticalmente */
  --height-card-stat-fluid: max(
    8.15rem,
    12vh
  ); /* Altura reducida un 20%: antes 10.1875rem (163px) → ahora 8.15rem (~130px) */
  --height-card-chart-fluid-base: clamp(
    18.4rem,
    36.455vh,
    24.58125rem
  ); /* 294.4px → 393.3px (+15%) - escala con altura del viewport */
  --height-card-chart-fluid: var(
    --height-card-chart-fluid-base
  ); /* valor por defecto, se puede sobreescribir por sección */

  /* Fluid widths - adapt to viewport */
  --width-card-stat-fluid: clamp(
    20rem,
    27.239583vw,
    32.6875rem
  ); /* 320px → 523px scaled al viewport (523px ÷ 1920px) */
  --width-card-chart-lg-fluid: clamp(
    40rem,
    55.677083vw,
    66.8125rem
  ); /* 640px → 1069px escalado exacto (1069px ÷ 1920px) */
  --width-card-chart-md-fluid: clamp(
    20rem,
    27.552083vw,
    33.0625rem
  ); /* 320px → 529px escalado exacto (529px ÷ 1920px) */

  /* Tables (semantic) */
  /* Row height based on fluid base (40px at 16px) */
  --height-row-md: 2.5rem;
  /* Budgets table column fractions (derived from Figma proportions) */
  --budgets-col-id: 0.094fr;
  --budgets-col-desc: 0.342fr;
  --budgets-col-amount: 0.103fr;
  --budgets-col-status: 0.111fr;
  --budgets-col-payment: 0.169fr;
  --budgets-col-insurer: 0.181fr;
  --budgets-grid-cols: minmax(0, var(--budgets-col-id))
    minmax(0, var(--budgets-col-desc)) minmax(0, var(--budgets-col-amount))
    minmax(0, var(--budgets-col-status)) minmax(0, var(--budgets-col-payment))
    minmax(0, var(--budgets-col-insurer));

  /* Payments table column fractions (from Figma widths, fluid) */
  --payments-col-id: 0.095fr;
  --payments-col-desc: 0.288fr;
  --payments-col-amount: 0.117fr;
  --payments-col-invoice: 0.149fr; /* Factura */
  --payments-col-sent: 0.154fr; /* Enviada */
  --payments-col-insurer: 0.197fr;
  --payments-grid-cols: minmax(0, var(--payments-col-id))
    minmax(0, var(--payments-col-desc)) minmax(0, var(--payments-col-amount))
    minmax(0, var(--payments-col-invoice)) minmax(0, var(--payments-col-sent))
    minmax(0, var(--payments-col-insurer));

  /* Radii - NOW SCALES WITH FLUID BASE */
  --radius-xl: 1rem; /* 16px ÷ 16 = 1rem */
  --radius-pill: 4.5rem; /* semantic "pill" radius for badges/chips */
  --radius-lg: 0.5rem; /* 8px: card corners in Figma */
  --radius-full: 9999px;

  /* Shadows */
  --shadow-cta: 0 1px 2px 0 rgba(0, 0, 0, 0.3),
    0 1px 3px 1px rgba(0, 0, 0, 0.15);
  --shadow-nav-active: inset 4px 0 0 0 #a8efe7;
  --shadow-elevation-card: 0 1px 2px rgba(36, 40, 44, 0.04);
  --shadow-elevation-popover: 0 8px 24px rgba(36, 40, 44, 0.12);

  /* Landing (pre-login) exact Figma specs */
  --blur-landing: 1.125rem; /* 18px */
  --landing-card-width: 28.75rem; /* 460px */
  --landing-card-height: 49.6875rem; /* 795px */
  --radius-card-lg: 2rem; /* 32px */
  --shadow-landing-card: -2px -2px 4px 0 rgba(0, 0, 0, 0.1),
    2px 2px 4px 0 rgba(0, 0, 0, 0.1);
  --landing-hero-size: 10.4375rem; /* 167px */
  --landing-actions-width: 23.75rem; /* 380px */
  --landing-top-gap: 4.5rem; /* 72px */
  --landing-gap-lg: 1.5rem; /* 24px */
  --text-title-landing: 2rem; /* 32px */
  --leading-title-landing: 2.5rem; /* 40px */
  --landing-cta-height: 3rem; /* 48px */
  --shadow-button-soft: 0px 2px 2px 0px rgba(0, 0, 0, 0.1);
  --landing-bottom-gap: 2.8125rem; /* 45px */
  --landing-max-h: 90vh; /* viewport-based, semantic token */

  /* Modal tokens (semantic aliases, reutilizados por auth) */
  --modal-card-width: var(--landing-card-width);
  --modal-card-height: var(--landing-card-height);
  --modal-max-h: var(--landing-max-h);
  --modal-radius-lg: var(--radius-card-lg);
  --modal-shadow: var(--elevation-card-soft);
  --modal-actions-width: var(--landing-actions-width);
  --modal-cta-height: var(--landing-cta-height);

  /* Pre-login background (shared for /login and /register) */
  --prelogin-bg-gradient: linear-gradient(
    180deg,
    rgba(81, 214, 199, 1) 0%,
    rgba(199, 210, 255, 1) 100%
  );

  /* Aliases semánticos propuestos */
  --color-surface-overlay: rgba(248, 250, 251, 0.8);
  --color-border-default: var(--color-neutral-300);
  --elevation-card-soft: var(--shadow-landing-card);
  --radius-circle-avatar: 9999px;
  --legal-top-gap: 0.75rem; /* 12px */

  /* Modal and form fields (rem-based) */
  --text-title-modal: 1.375rem; /* 22px */
  --leading-title-modal: 1.75rem; /* 28px */
  --text-body-xs: 0.75rem; /* 12px */
  --leading-body-xs: 1rem; /* 16px */
  --form-field-gap-lg: 1.5rem; /* 24px */
  --input-height-lg: 3.5rem; /* 56px */
  --input-padding-x: 0.625rem; /* 10px */
  --input-padding-y: 0.5rem; /* 8px */
  --input-label-offset-y: -0.5rem; /* -8px */
  --input-label-offset-x: 0.5rem; /* 8px */

  /* Modal-specific layout (from Figma, rem-based) */
  --modal-header-top: 6.0625rem; /* 97px */
  --modal-copy-to-first-gap: 3.5rem; /* 56px */
  --modal-cta-top-gap: 3.5rem; /* 56px */
  --modal-legal-top-gap: 4rem; /* 64px */
}

/* ✨ BASE HTML FLUIDA - Hace TODO responsive automáticamente */
html {
  /*
    Hacemos la base fluida entre 1280px y 1600px, y a partir de 1600px
    la fijamos en 16px para que en monitores 1920x1080 no "crezca" a 18px.
    Fórmula lineal: y = 0.625vw + 6px  =>
      - 1280px: 0.625*12.8 + 6 = 14px
      - 1600px: 0.625*16   + 6 = 16px
      - ≥1600px: clamp cap = 16px
  */
  font-size: clamp(14px, calc(0.625vw + 6px), 16px);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-inter), Inter, ui-sans-serif, system-ui, sans-serif;
}

/* Material Symbols (MD3) */
.material-symbols-rounded {
  font-family: 'Material Symbols Rounded';
  font-weight: normal;
  font-style: normal;
  font-size: 1em; /* escala con el texto */
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-flex;
  white-space: nowrap;
  direction: ltr;
  font-feature-settings: 'liga';
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

@layer components {
  .dashboard-stack {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-section-gap);
  }

  .dashboard-grid-stats {
    display: grid;
    gap: var(--spacing-card-gap);
    grid-template-columns: repeat(
      3,
      minmax(min(100%, var(--width-card-stat-fluid)), var(--width-card-stat))
    );
  }

  .dashboard-grid-charts {
    display: grid;
    gap: var(--spacing-card-gap);
    grid-template-columns: repeat(
      auto-fit,
      minmax(min(100%, var(--width-card-chart-md-fluid)), 1fr)
    );
  }

  .dashboard-grid-bottom {
    --height-card-chart-fluid: max(
      16rem,
      min(
        var(--height-card-chart-fluid-base),
        calc(100vh - 40.625rem - var(--spacing-plnav))
      )
    );
  }

  .dashboard-grid-double {
    display: grid;
    gap: var(--spacing-card-gap);
    grid-template-columns: repeat(
      auto-fit,
      minmax(min(100%, var(--width-card-chart-md)), 1fr)
    );
  }

  .dashboard-header-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-header-stack);
  }

  @media (min-width: 1024px) {
    .dashboard-grid-charts {
      grid-template-columns: minmax(0, var(--width-card-chart-lg-fluid)) minmax(
          0,
          var(--width-card-chart-md-fluid)
        );
      justify-content: center;
    }

    .dashboard-grid-stats {
      grid-template-columns: repeat(3, minmax(0, var(--width-card-stat)));
      justify-content: center;
    }
  }
}

/* Utility: Standard page container */
@layer utilities {
  .container-page {
    --container-gutter: clamp(1rem, 3vw, var(--spacing-plnav));
    --dashboard-max-width: calc(
      (2 * var(--width-card-stat)) + var(--width-card-chart-lg) +
        (2 * var(--spacing-card-gap))
    );
    width: min(
      100%,
      calc(var(--dashboard-max-width) + (2 * var(--container-gutter)))
    );
    margin-inline: auto;
    padding-inline: var(--container-gutter);
  }
  /* Oculta scrollbars pero mantiene el scroll funcional */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE & Edge */
    scrollbar-width: none; /* Firefox */
  }
}

/* Dashboard gaps at ≥1600px (incl. 1920px): force 1rem horizontally and vertically between cards */
@media (min-width: 1600px) {
  :root {
    --spacing-card-gap: 1rem;
  }
}

@media (max-height: 1000px) {
  :root {
    /* Reduce vertical stack so 24px bottom spacing stays visible on shorter viewports */
    --spacing-header-stack: clamp(1.4rem, 3.2vh, 1.95rem);
    --height-card-chart-fluid: clamp(
      18.4rem,
      calc(36.455vh - 1.5rem),
      24.58125rem
    );
  }
}
